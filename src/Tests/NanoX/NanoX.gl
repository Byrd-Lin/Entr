#include "NanoX.glh"

void
set_keypress(void)
{
	system("stty raw -echo");
	return;
}

void
reset_keypress(void)
{
	system("stty -raw echo");
	return;
}

void stp()
{
	char c;

	set_keypress();
	while (c = getchar()) {
		if (c == 'q') {
			goto BREAK;
		}
		reset_keypress();
		refreshScreen();
		set_keypress();
	}
	BREAK:
	reset_keypress();

	return;
}

int main()
{
	struct Rectangle rect;

	initTerminal();

	setBackground();
	setForeground();

	printStr("Welcome", 5, 7);
	printStr("Press 'q' to exit", 6, 7);
	drawRect2(getRect(getLines() - 1, getCols() - 1, ' '), 0, 0);
	drawRect2(getRect(10, 30, '\''), 2, 2);
	refreshScreen();
	//refreshScreen();
	stp();

	setDefault();

	return 0;
}
